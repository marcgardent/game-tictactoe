
## Order Syntax

> An order is processed over several turns according to their policies.

Backus–Naur form:

* `<requests>` ::= {`<order>` `<expire>` \[`<policies>` \]} `;`
* `<order>` ::= `<verb>` `<quantity: integer>` `<stock id: string>`
* `<expire>` ::= `LIVE` `<timeout: integer>` `Turns` 
* `<verb>` ::= (`BUY`|`SELL`)
* `<policies>` ::= \[`<enter-policy>`\] \[`[<leave-policy>]`\] \[`[<accept-policy>]`\] \[`[<price-policy>]`\] \[`,`\]
* `<enter-policy>` ::= `ENTER` (`WHEN` `enter-criteria`| `Now`)
* `<enter-criteria>` ::= ((`$Price`|`$Delta-Price`) `<le-ge>` `<integer>` |`Delta-Price-Percent` `<le-ge>` `<percent>`)  
* `<leave-policy>` ::=  (`LEAVE WHEN` `$Price` `<comparator>` `<integer>`| `LEAVE At-End`)
* `<accept-policy>` ::= `ACCEPT` (`Step-By-Step`|`All-Or-None`)
* `<price-policy>` ::= `AT` (`any-price`|`price` `<le-or-ge>` `<integer>`)
* `<le-ge>` ::= (`<=`|`>=`)
* `<integer>` ::= `1..32768`
* `<percent>` ::= `1..100`

> I have created this syntax so that the orders are as understandable as possible for a coder.

## Orders

You can buy and sell stocks with an order sent over several turns according to their policies.
let me explain how to write your request with traditional orders.

> for more information, read the informal definitions here: https://www.investopedia.com/investing/basics-trading-stock-know-your-orders/

#### Market Order

In few words:

```
BUY 100 Apple, CANCEL WHEN $Turn==10;
```

let me introduce default policies and explain the request:

```
BUY 100 Apple,                 # (mandatory) buy 100 Apple's stock 
 LIVE 10 Turns,                # (mandatory) it is removed at last turn definitely
 ENTER Now,                    # (default) the order is active without delay
 LEAVE At-End,                 # (default) the order remains active any way
 ACCEPT Step-By-Step,          # (default) buy as much as possible and try again next turn
 AT any-price;                 # (default) buy at the best seller price
```

> For next cases, I don't repeat default policies but there are used implicitly.

### Limit Buy Order
```
#Limit Buy Order

BUY 100 Apple,                    # (mandatory)buy 100 Apple's stock
 LIVE 10 Turns,                   # (mandatory) it is removed in 10 turns definitely
 AT $Price <= 10;                 # (limit-price) buy at the limit price or lesser

#Sell Buy Order

SELL 100 Apple,                   # (mandatory)buy 100 Apple's stock
 LIVE 10 Turns,                   # (mandatory)  it is removed in 5 turns definitely
 AT $Price >= 10;                 # (limit-price) sell at the limit price or greater
```

### Stop Order

```
# Stop Buy Order
BUY 100 Apple,                 # (mandatory) buy 100 Apple's stock 
 LIVE 10 Turns,                # (mandatory) it is removed at turn 10 definitely
 ENTER WHEN $Price >= 10;      # (stop-price) the order become active on the criteria price

# Stop Sell Order
SELL 100 Apple,                 # (mandatory) buy 100 Apple's stock
LIVE 10 Turns,                  # (mandatory) it is removed at turn 10 definitely
ENTER WHEN $Price <= 10;        # (stop-price) the order become active on the criteria price
```

### Stop–limit order
```
# Stop Buy Order
BUY 100 Apple,                 # (mandatory) buy 100 Apple's stock 
 LIVE 10 Turns,                # (mandatory) it is removed at turn 10 definitely
 ENTER WHEN $Price >= 10 ;     # (stop-price) the order become active on the criteria price
 AT $Price <= 10;              # (limit-price) buy at the limit price or lesser

# Stop Sell Order
SELL 100 Apple,                # (mandatory) buy 100 Apple's stock
LIVE 10 Turns,                 # (mandatory) it is removed at turn 10 definitely
ENTER WHEN $Price >= 10;         # (stop-price) the order become active on the criteria price
AT $Price <= 10;               # (limit-price) buy at the limit price or lesser
```

#### Stop-Loss Orders

* Quantity policy: partial
* Price policy: user-fixed
* Triggering policy: price
* Canceling policy: price

### Trailing-stop order

* Quantity policy: partial
* Price policy: user-fixed
* Triggering policy: price
* Canceling policy: price

### Trailing stop–limit order

#### Template Order

* Quantity policy: all-or-none|partial
* Price policy: market|user-fixed|market-fixed
* Triggering policy: now|price|delta-price
* Canceling policy: filled|price
